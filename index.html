<!DOCTYPE html>
<html>
<head>
	<title>Calculator</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<div class="container">
		<h1>Scrum Calculator</h1>
		<div class="form-group">
			<label for="num1">Masukan jumlah skenario dalam scrum :</label>
			<input type="number" id="skenario" class="form-control">
		</div>
		<button onclick="calculate()" class="btn btn-primary btn-block">Calculate</button>
		<button onclick="resetForm()" class="btn btn-secondary btn-block">Reset</button>
		<div id="jmlskenario" class="text-left mt-4"></div>
		<div id="waktu" class="text-left mt-4"></div>
		<div id="orang" class="text-left mt-4"></div>
		<div id="sukses" class="text-left mt-4"></div>
		<div id="cost" class="text-left mt-4"></div>
		<div id="noData" class="text-center mt-4"></div>
		<div id="skenarioLow" class="text-center mt-4"></div>
		<div id="skenarioLow1" class="text-center mt-4"></div>
	</div>

	<div class="footer">
		<p>Data didapat berdasarkan hasil pengujian dari lebih dari 1 tahun projek dan 3000 lebih skenario pada tahun 2021 - 2022 <br> &copy; 2023 Filbert Amadea</p>
	</div>

	<script>
	function calculate() {
		var skenario = parseInt(document.getElementById("skenario").value);
		if(isNaN(skenario)){
			emptyData()
			whiteList()
			document.getElementById("skenarioLow").innerHTML = "";
		} else if (skenario >= 10000) {
			dataToMuch()
			whiteList()
			document.getElementById("noData").innerHTML = "";
		} else if (skenario <= 150) {
			whiteList()
			kedikitan()
			document.getElementById("noData").innerHTML = "";
		} else {
			document.getElementById("skenarioLow").innerHTML = "";
			document.getElementById("noData").innerHTML = "";
			var rumus = 34.59445711
			var waktu = 2.44307
			var sukses = -0.125
			var orang = 0.2833
			var cost = 1800000

			var pembanding = skenario / rumus

			document.getElementById("jmlskenario").innerHTML = "Skenario: " + skenario 
			+ " skenario";
			document.getElementById("waktu").innerHTML = "Waktu yang dibutuhkan: " + Math.ceil((waktu*pembanding/7)) + " Sprint";
			document.getElementById("orang").innerHTML = "Orang yang dibutuhkan: " + countOrang(orang, pembanding);
			document.getElementById("sukses").innerHTML = "Persentase sukses scrum : " + countSukses(sukses, pembanding) ;
			document.getElementById("cost").innerHTML = "Cost / scrum: Rp. " + countCost(cost, pembanding, Math.ceil(orang*pembanding)) ;

			skenarioToLow(Math.ceil(orang*pembanding), skenario)

			document.getElementById("skenario").value = "";
		}
	}

	function emptyData() {
		document.getElementById("noData").innerHTML = "Skenario tidak boleh kosong!";
	}

	function kedikitan() {
		document.getElementById("skenarioLow").innerHTML = "Skenario terlalu sedikit untuk dilakukan proses scrum!";
	}

	function dataToMuch() {
		document.getElementById("skenarioLow").innerHTML = "Skenario terlalu banyak untuk sebuah fitur atau projek, coba dibagi kedalam beberapa fitur!";
	}

	function whiteList() {
		document.getElementById("jmlskenario").innerHTML = "";
		document.getElementById("waktu").innerHTML = "";
		document.getElementById("orang").innerHTML = "";
		document.getElementById("sukses").innerHTML = "";
		document.getElementById("cost").innerHTML = "";
		document.getElementById("skenarioLow1").innerHTML = "";
	}

	function countOrang(orang, pembanding) {
		var hitung = Math.ceil(orang*pembanding)
		var hasil = ""
		if(hitung <=4) {
			hasil = "4"
		} else {
			hasil = hitung
		}

		return hasil
	}

	function countSukses(sukses, pembanding) {
		var persentase = sukses*pembanding
		var angkaSukses = 100 + persentase
		var display = ""
		if(angkaSukses >= 85) {
			display =  angkaSukses + "%"
		} else {
			display = "Dibawah 85%"
		}

		return display
	}

	function countCost(cost, pembanding, orang) {
		var hasil = Math.floor(cost*pembanding)  
		var displayGaji = formatAngka(hasil)
		console.log(3, displayGaji)
		return displayGaji
	}

	function skenarioToLow(orang){
		if(orang < 2) {
			document.getElementById("skenarioLow1").innerHTML = "Skenario terlalu sedikit untuk dilakukan pengujian scrum, tapi kami akan tetap coba hitung.."  ;
		} else if ( orang >= 2 && orang > 10) {
			document.getElementById("skenarioLow1").innerHTML = "Skenario terlalu banyak, mungkin coba untuk membagi kedalam beberapa projek atau fitur yang berbeda, tapi kami akan tetap coba hitung.."  ;
		} else {
			document.getElementById("skenarioLow1").innerHTML = ""  ;
		}
	}

	function formatAngka(number) {
		var	number_string = number.toString(),
			sisa 	= number_string.length % 3,
			rupiah 	= number_string.substr(0, sisa),
			ribuan 	= number_string.substr(sisa).match(/\d{3}/g);

			// tambahkan titik jika yang di input sudah menjadi angka ribuan
			if(ribuan){
				separator = sisa ? '.' : '';
				rupiah += separator + ribuan.join('.');
			}

			return rupiah
	}

	function resetForm() {
		location.reload()
		document.getElementById("skenario").value = "";
		document.getElementById("jmlskenario").innerHTML = "";
		document.getElementById("waktu").innerHTML = "";
		document.getElementById("orang").innerHTML = "";
		document.getElementById("sukses").innerHTML = "";
		document.getElementById("cost").innerHTML = "";
	}
	</script>

	<script src="calculator.js"></script>
</body>
</html>